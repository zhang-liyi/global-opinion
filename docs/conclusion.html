<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Conclusion | PSet 4</title>
  <meta name="description" content="Chapter 7 Conclusion | PSet 4" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Conclusion | PSet 4" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Conclusion | PSet 4" />
  
  
  

<meta name="author" content="Xingyu Wei, Liyi Zhang" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="interactive-component.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Global Opinion</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="conclusion.html"><a href="conclusion.html#mycars-missing-patterns"><i class="fa fa-check"></i><b>7.0.1</b> 1. <code>mycars</code> missing patterns</a></li>
<li class="chapter" data-level="7.0.2" data-path="conclusion.html"><a href="conclusion.html#missing-value-plot-function"><i class="fa fa-check"></i><b>7.0.2</b> 2. Missing value plot function</a></li>
<li class="chapter" data-level="7.0.3" data-path="conclusion.html"><a href="conclusion.html#setup-your-github-final-project-repo"><i class="fa fa-check"></i><b>7.0.3</b> 3. Setup your GitHub final project repo</a></li>
<li class="chapter" data-level="7.0.4" data-path="conclusion.html"><a href="conclusion.html#missing-values-chapter"><i class="fa fa-check"></i><b>7.0.4</b> 4. Missing values chapter</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PSet 4</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="conclusion" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Conclusion</h1>
<p>We have shown factors connected to negative opinions towards China, and analyzed them on both individual and national scales. The results suggest that both covid and socio-economic factors have an effect on the increasing negative impact on China. However, it is suggested that covid itself further pushed opinions to the negative side, and certain covid-related factors are significant on both individual and national scales.</p>
<p>One limitation is that most plots give correlational information, and to address that we tried to inject more causal information through different dimensions of analysis. One example is analyzing not just current atittudes, but also attitudes across time along with other variables, such as one variable that is significant across all experiments: opinion on how China handled covid. Even so, the limitation remains and we should be encouraged to think beyond what the data represents. There could always be an omitted variable bias, that is, something latent that leads to both negative thinking about the way China handled covid and opinion towards China in general. A future direction is thinking about what could these latent variables be. Possible candidates include the perception of democracy and the culture of media, which could lead to criticism against both China’s stoic covid policies and China itself.</p>

<p>Note: Grading is based both on your graphs and verbal explanations. Follow all best practices <em>as discussed in class</em>, including choosing appropriate parameters for all graphs. <em>Do not expect the assignment questions to spell out precisely how the graphs should be drawn. Sometimes guidance will be provided, but the absense of guidance does not mean that all choices are ok.</em></p>
<p>IMPORTANT: THIS TEMPLATE DOES NOT INCLUDE THE SAMPLE GRAPHS THAT APPEAR IN THE .HTML VERSION OF THE ASSIGNMENT SO BE SURE TO VIEW THAT FILE AS WELL.</p>
<div id="mycars-missing-patterns" class="section level3" number="7.0.1">
<h3><span class="header-section-number">7.0.1</span> 1. <code>mycars</code> missing patterns</h3>
<p>Create a missing values plot for the <code>mycars</code> dataset created below (slightly different from the one in the lecture slides). Your plot should be in the style of <code>extracat::visna()</code> (no longer available on CRAN) using <strong>ggplot2</strong> to create the main plot and two side plots and <strong>patchwork</strong> to put them together. It should show accurately: missing patterns, counts for missing by column and missing by pattern, and make it clear which row respresents complete cases. Bars in the side plots should be sorted and correspond to the rows and columns of the main plot. An example is provided though the aesthetics of your plot do not have to conform precisely to the example. Some code is provided to get you started with finding missing patterns. (Keep in mind that in the next question you will be turning this code into a function so to save yourself time later on write as generically as possible.)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="conclusion.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="conclusion.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb2-3"><a href="conclusion.html#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="conclusion.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add NAs to mtcars dataset</span></span>
<span id="cb2-5"><a href="conclusion.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">5702</span>)</span>
<span id="cb2-6"><a href="conclusion.html#cb2-6" aria-hidden="true" tabindex="-1"></a>mycars <span class="ot">&lt;-</span> mtcars</span>
<span id="cb2-7"><a href="conclusion.html#cb2-7" aria-hidden="true" tabindex="-1"></a>mycars[<span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>, <span class="st">&quot;gear&quot;</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb2-8"><a href="conclusion.html#cb2-8" aria-hidden="true" tabindex="-1"></a>mycars[<span class="dv">10</span><span class="sc">:</span><span class="dv">20</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb2-9"><a href="conclusion.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) mycars[<span class="fu">sample</span>(<span class="dv">32</span>,<span class="dv">1</span>), <span class="fu">sample</span>(<span class="dv">11</span>,<span class="dv">1</span>)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span></code></pre></div>
<p><strong>Hints:</strong></p>
<ul>
<li>You can use this code to find and count the missing patterns:</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="conclusion.html#cb3-1" aria-hidden="true" tabindex="-1"></a>missing_patterns <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">is.na</span>(mycars)) <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="conclusion.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by_all</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="conclusion.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">&quot;count&quot;</span>, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="conclusion.html#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="conclusion.html#cb4-1" aria-hidden="true" tabindex="-1"></a>tidypatterns <span class="ot">&lt;-</span> missing_patterns[,<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="conclusion.html#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="conclusion.html#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gather</span>(key, value, <span class="sc">-</span>id) </span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="conclusion.html#cb5-1" aria-hidden="true" tabindex="-1"></a>complete_bool <span class="ot">=</span> <span class="fu">rowSums</span>(missing_patterns[,<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>]) <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb5-2"><a href="conclusion.html#cb5-2" aria-hidden="true" tabindex="-1"></a>complete_row <span class="ot">=</span> <span class="fu">which</span>(complete_bool)</span>
<span id="cb5-3"><a href="conclusion.html#cb5-3" aria-hidden="true" tabindex="-1"></a>tidypatterns <span class="ot">&lt;-</span> tidypatterns <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="conclusion.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">ToHighlight =</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> complete_row, <span class="st">&quot;TRUE&quot;</span>, <span class="st">&quot;FALSE&quot;</span> ) )</span>
<span id="cb5-5"><a href="conclusion.html#cb5-5" aria-hidden="true" tabindex="-1"></a>tidypatterns <span class="ot">&lt;-</span> tidypatterns <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="conclusion.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">color =</span> <span class="fu">as.factor</span>(<span class="fu">as.integer</span>(<span class="sc">!</span>value)<span class="sc">+</span><span class="fu">as.integer</span>(<span class="fu">as.logical</span>(ToHighlight))) )</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="conclusion.html#cb6-1" aria-hidden="true" tabindex="-1"></a>missing_patterns2<span class="ot">&lt;-</span>missing_patterns[<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>]</span>
<span id="cb6-2"><a href="conclusion.html#cb6-2" aria-hidden="true" tabindex="-1"></a>missing_patterns2 <span class="ot">&lt;-</span> missing_patterns2 <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="conclusion.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">ToHighlight =</span> <span class="fu">ifelse</span>(<span class="fu">rowSums</span>(.)<span class="sc">==</span><span class="dv">0</span>, <span class="st">&quot;TRUE&quot;</span>, <span class="st">&quot;FALSE&quot;</span> ) )</span>
<span id="cb6-4"><a href="conclusion.html#cb6-4" aria-hidden="true" tabindex="-1"></a>missing_patterns[<span class="st">&#39;ToHighlight&#39;</span>] <span class="ot">=</span> missing_patterns2[<span class="st">&#39;ToHighlight&#39;</span>]</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="conclusion.html#cb7-1" aria-hidden="true" tabindex="-1"></a>p1<span class="ot">&lt;-</span>tidypatterns <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="conclusion.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">key =</span> <span class="fu">fct_reorder</span>(key,<span class="sc">-</span>value,<span class="at">.fun=</span><span class="st">&#39;sum&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="conclusion.html#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> key,<span class="at">y =</span> <span class="fu">fct_rev</span>(id), <span class="at">fill =</span> color))<span class="sc">+</span></span>
<span id="cb7-4"><a href="conclusion.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span>     </span>
<span id="cb7-5"><a href="conclusion.html#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;0&#39;</span><span class="ot">=</span><span class="st">&quot;purple&quot;</span>,<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="st">&quot;light grey&quot;</span>,<span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="st">&quot;dark grey&quot;</span>))<span class="sc">+</span></span>
<span id="cb7-6"><a href="conclusion.html#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_alpha_manual(values = c(alpha(&#39;grey&#39;,0.1),alpha(&#39;purple&#39;,0.1)))+</span></span>
<span id="cb7-7"><a href="conclusion.html#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;variable&#39;</span>)<span class="sc">+</span></span>
<span id="cb7-8"><a href="conclusion.html#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&#39;missing pattern&#39;</span>)<span class="sc">+</span></span>
<span id="cb7-9"><a href="conclusion.html#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill=</span><span class="cn">FALSE</span>, <span class="at">color=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb7-10"><a href="conclusion.html#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb7-11"><a href="conclusion.html#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>,<span class="at">x =</span><span class="fu">ncol</span>(missing_patterns)<span class="sc">/</span><span class="dv">2</span> ,<span class="at">y =</span> <span class="fu">nrow</span>(missing_patterns)<span class="sc">-</span>complete_row<span class="sc">+</span><span class="dv">1</span>,<span class="at">label =</span> <span class="st">&quot;complete cases&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="conclusion.html#cb8-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="fu">levels</span>(<span class="fu">fct_reorder</span>(tidypatterns<span class="sc">$</span>key,<span class="sc">-</span>tidypatterns<span class="sc">$</span>value,<span class="at">.fun=</span><span class="st">&#39;sum&#39;</span>))</span>
<span id="cb8-2"><a href="conclusion.html#cb8-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="fu">colSums</span>(<span class="fu">is.na</span>(mycars))</span>
<span id="cb8-3"><a href="conclusion.html#cb8-3" aria-hidden="true" tabindex="-1"></a>reorder_idx <span class="ot">&lt;-</span> <span class="fu">match</span>(a,<span class="fu">names</span>(b))</span>
<span id="cb8-4"><a href="conclusion.html#cb8-4" aria-hidden="true" tabindex="-1"></a>value <span class="ot">=</span> b[reorder_idx]</span>
<span id="cb8-5"><a href="conclusion.html#cb8-5" aria-hidden="true" tabindex="-1"></a>key <span class="ot">=</span> <span class="fu">names</span>(value)</span>
<span id="cb8-6"><a href="conclusion.html#cb8-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(key,value)</span>
<span id="cb8-7"><a href="conclusion.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(df) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df)</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="conclusion.html#cb9-1" aria-hidden="true" tabindex="-1"></a>p2<span class="ot">&lt;-</span><span class="fu">ggplot</span>(df,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(key,<span class="sc">-</span>value),<span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="conclusion.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>)<span class="sc">+</span></span>
<span id="cb9-3"><a href="conclusion.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&#39;num rows </span><span class="sc">\n</span><span class="st"> missing:&#39;</span>)<span class="sc">+</span></span>
<span id="cb9-4"><a href="conclusion.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>)<span class="sc">+</span></span>
<span id="cb9-5"><a href="conclusion.html#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&#39;Missing value patterns&#39;</span>)<span class="sc">+</span></span>
<span id="cb9-6"><a href="conclusion.html#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="conclusion.html#cb10-1" aria-hidden="true" tabindex="-1"></a>p3<span class="ot">&lt;-</span><span class="fu">ggplot</span>(missing_patterns,<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">nrow</span>(missing_patterns)<span class="sc">:</span><span class="dv">1</span>,<span class="at">y =</span> count,<span class="at">fill =</span> ToHighlight)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="conclusion.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb10-3"><a href="conclusion.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(missing_patterns), <span class="at">labels =</span> <span class="fu">nrow</span>(missing_patterns)<span class="sc">:</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb10-4"><a href="conclusion.html#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;FALSE&#39;</span><span class="ot">=</span><span class="st">&quot;lightblue&quot;</span>,<span class="st">&#39;TRUE&#39;</span><span class="ot">=</span><span class="st">&quot;blue&quot;</span>))<span class="sc">+</span></span>
<span id="cb10-5"><a href="conclusion.html#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&#39;row count&#39;</span>)<span class="sc">+</span></span>
<span id="cb10-6"><a href="conclusion.html#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb10-7"><a href="conclusion.html#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb10-8"><a href="conclusion.html#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y=</span><span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb10-9"><a href="conclusion.html#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill=</span><span class="cn">FALSE</span>, <span class="at">color=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="conclusion.html#cb11-1" aria-hidden="true" tabindex="-1"></a>layout <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb11-2"><a href="conclusion.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="st">BBBBBB#</span></span>
<span id="cb11-3"><a href="conclusion.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="st">BBBBBB#</span></span>
<span id="cb11-4"><a href="conclusion.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="st">AAAAAAC</span></span>
<span id="cb11-5"><a href="conclusion.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="st">AAAAAAC</span></span>
<span id="cb11-6"><a href="conclusion.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="st">AAAAAAC</span></span>
<span id="cb11-7"><a href="conclusion.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="st">AAAAAAC</span></span>
<span id="cb11-8"><a href="conclusion.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="st">AAAAAAC</span></span>
<span id="cb11-9"><a href="conclusion.html#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb11-10"><a href="conclusion.html#cb11-10" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span> p3 <span class="sc">+</span> </span>
<span id="cb11-11"><a href="conclusion.html#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">design =</span> layout)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<ul>
<li>To highlight the complete cases row you need a different fill scale than the one used to show missing vs. non-missing in the main plot (purple and grey in the example). This is a little tricky since you’re only allowed one fill scale in <strong>ggplot2</strong>. You can either use <code>alpha</code> to control the highlight with <code>scale_alpha_manual(values = ...)</code> or use the <strong>ggnewscale</strong> package which provides for multiple fill scales in the same graph.</li>
</ul>
</div>
<div id="missing-value-plot-function" class="section level3" number="7.0.2">
<h3><span class="header-section-number">7.0.2</span> 2. Missing value plot function</h3>
<ol style="list-style-type: lower-alpha">
<li>Create a function for creating missing plots based on your code from question 1. It should provide an option to show either missing counts or missing percent. The percent option for <code>mycars</code> is shown below.</li>
</ol>
<p>You either put the function code in a separate <code>.R</code> file or include it in the <code>.Rmd</code> file.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="conclusion.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;plot_missing.R&quot;</span>)</span>
<span id="cb12-2"><a href="conclusion.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(mycars, <span class="at">percent =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Show the output for both options (counts / percent) for the <code>economics</code> dataset in the <strong>ggplot2</strong> package. (This is a test to see if your function works if there are no missing values.)</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="conclusion.html#cb13-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> economics</span>
<span id="cb13-2"><a href="conclusion.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;plot_missing.R&quot;</span>)</span>
<span id="cb13-3"><a href="conclusion.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(data,<span class="at">percent=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="conclusion.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;plot_missing.R&quot;</span>)</span>
<span id="cb14-2"><a href="conclusion.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(data,<span class="at">percent=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Show the output for both options (counts / percent) for the <code>HollywoodMovies2011</code> dataset in the <strong>Lock5withR</strong> package. You can shorten the column names so they don’t overlap in the plot.</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="conclusion.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Lock5withR)</span>
<span id="cb15-2"><a href="conclusion.html#cb15-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> HollywoodMovies2011</span>
<span id="cb15-3"><a href="conclusion.html#cb15-3" aria-hidden="true" tabindex="-1"></a>ori_name <span class="ot">=</span> <span class="fu">colnames</span>(data)</span>
<span id="cb15-4"><a href="conclusion.html#cb15-4" aria-hidden="true" tabindex="-1"></a>new_name <span class="ot">=</span> <span class="fu">abbreviate</span>(ori_name,<span class="at">minlength =</span> <span class="dv">4</span>)</span>
<span id="cb15-5"><a href="conclusion.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data) <span class="ot">=</span> new_name</span>
<span id="cb15-6"><a href="conclusion.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;plot_missing.R&quot;</span>)</span>
<span id="cb15-7"><a href="conclusion.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(data, <span class="at">percent =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="conclusion.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;plot_missing.R&quot;</span>)</span>
<span id="cb16-2"><a href="conclusion.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(data, <span class="at">percent =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
</div>
<div id="setup-your-github-final-project-repo" class="section level3" number="7.0.3">
<h3><span class="header-section-number">7.0.3</span> 3. Setup your GitHub final project repo</h3>
<ol style="list-style-type: lower-alpha">
<li>Set up your final project repository following the <a href="https://github.com/jtr13/EDAVtemplate">EDAVproject template</a>. You can either choose one team member’s GitHub account, or create an organization to house the final project. <em>Be sure to follow all of the steps in the README so your bookdown book renders with your information, not the placeholders in the template.</em> Edit the link below to point to your rendered book:</li>
</ol>
<p><a href="https://github.com/zhang-liyi/global-opinion" class="uri">https://github.com/zhang-liyi/global-opinion</a></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Make sure that all team members have write access to the repository and have practiced making contributions. Edit the link below to point to your contributors page, showing that all team members have made contributions to the repo (Note that we do not have the ability to see who has write access, only who has contributed):</li>
</ol>
<p><a href="https://github.com/zhang-liyi/global-opinion/graphs/contributors" class="uri">https://github.com/zhang-liyi/global-opinion/graphs/contributors</a></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Discuss a plan for dividing up the work for the final project and briefly summarize what each person will do.</li>
</ol>
<p>The project has two team members: Xingyu Wei and Liyi Zhang. We will each study sub-problems that are relevant to demonstrating factors that affect global opinion. In this process, we will each do a portion of coding and written analysis specific to the sub-problems that we are each studying. So far, more specficially, Xingyu wrote the code for missing data, and Liyi gathered and cleaned the dataset and setup the GitHub.</p>
</div>
<div id="missing-values-chapter" class="section level3" number="7.0.4">
<h3><span class="header-section-number">7.0.4</span> 4. Missing values chapter</h3>
<p>Write a first draft of the missing values chapter of your final project. You do not have to include all of the data you use in the final project. Choose one file and analyze it using techniques discussed in class for missing values. Include a plot using your function from Q2 as well as verbal interpretation of the plot. Edit this link to point to your chapter:</p>
<p><a href="https://zhang-liyi.github.io/global-opinion/missing-values.html" class="uri">https://zhang-liyi.github.io/global-opinion/missing-values.html</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="interactive-component.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/zhang-liyi/global-opinion/edit/main/07-conclusion.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/zhang-liyi/global-opinion/blob/main/07-conclusion.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
