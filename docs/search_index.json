[["index.html", "PSet 4 Chapter 1 Introduction", " PSet 4 Xingyu Wei, Liyi Zhang 2021-12-13 Chapter 1 Introduction Covid-19 significantly impacts world politics, and China has become an increasingly prominent player on the world stage. This project studies major factors that influence global attitudes toward China, and examines the ways these factors interact with each other. It is clear that global public opinions toward China dropped significantly as measured before and after covid. We investigate how covid’s effect on individuals and factors other than covid interact to influence opinions toward China. Specifically, we discover that the impact of factors differ when applied to individuals or countries. Economic situation, how much covid impact livelihood, and perception on how China handled covid are significant in influencing individual opinions. However, only perception on how China handled covid correlates whether a country overall tends more to favor or disfavor China. We draw inspirations from a similar study conducted by the Pew Research Center: Unfavorable Views of China Reach Historic Highs in Many Countries. Both studies identify factors connected with increasingly negative views towards China. However, our study differs by analyzing factors on an individual level, whereas the original study analyzes national trends. Additionally, our study features interactions among three or more variables that are absent in the original study. "],["data-sources.html", "Chapter 2 Data sources", " Chapter 2 Data sources Our dataset is survey data provided by Pew Research Center. Its website contains a global research datasets section, and it is from here that we draw multiple years’ survey data. The survey is conducted across advanced economies, with questions focusing on global attitudes. Typical questions include opinion towards particular countries, towards own country’s economy, and towards concepts such as globalization. Dataset from year 2020 particularly contains question on Covid-19, such as how much covid affected one’s life in general. The questions consist mainly of multiple choices, and it is only multiple choices that we use in our project. The survey is conducted on over 10,000 individuals. The survey is conducted by Pew Research Center, following general international survey methodologies that are also specified in detail in their official website. "],["data-transformation.html", "Chapter 3 Data transformation", " Chapter 3 Data transformation The data is a .sav file, and data transformation is quite simple once the datasets are downloaded and put in the same folder. It is also necessary to install the package haven to read .sav file. We can take a peek at the dataset: ## # A tibble: 6 × 226 ## ID survey country phone_sample weight covid_change covid_ownfaith ## &lt;dbl&gt; &lt;dbl+lbl&gt; &lt;dbl+lb&gt; &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl+lbl&gt; &lt;dbl+lbl&gt; ## 1 481001184 1202006 [Summer, 2020] 14 [Uni… 1 [Landline] 0.804 4 [Not at a… 1 [Stronger] ## 2 481001208 1202006 [Summer, 2020] 14 [Uni… 1 [Landline] 0.294 1 [A great … 3 [Has not ch… ## 3 481001226 1202006 [Summer, 2020] 14 [Uni… 1 [Landline] 0.589 1 [A great … 3 [Has not ch… ## 4 481001242 1202006 [Summer, 2020] 14 [Uni… 1 [Landline] 0.294 2 [A fair a… 1 [Stronger] ## 5 481001446 1202006 [Summer, 2020] 14 [Uni… 1 [Landline] 0.418 2 [A fair a… 3 [Has not ch… ## 6 481000348 1202006 [Summer, 2020] 14 [Uni… 1 [Landline] 0.860 4 [Not at a… 3 [Has not ch… ## # … with 219 more variables: covid_countryfaith &lt;dbl+lbl&gt;, covid_family &lt;dbl+lbl&gt;, ## # covid_united &lt;dbl+lbl&gt;, covid_cooperation &lt;dbl+lbl&gt;, trust_people &lt;dbl+lbl&gt;, ## # econ_sit &lt;dbl+lbl&gt;, improve_econ &lt;dbl+lbl&gt;, fav_US &lt;dbl+lbl&gt;, fav_China &lt;dbl+lbl&gt;, ## # fav_Russia &lt;dbl+lbl&gt;, fav_eu &lt;dbl+lbl&gt;, fav_un &lt;dbl+lbl&gt;, fav_Iran &lt;dbl+lbl&gt;, ## # fav_NATO &lt;dbl+lbl&gt;, COVID_US &lt;dbl+lbl&gt;, covid_china &lt;dbl+lbl&gt;, ## # covid_country &lt;dbl+lbl&gt;, covid_EU &lt;dbl+lbl&gt;, covid_WHO &lt;dbl+lbl&gt;, ## # PARTYFAV_AUSTRALIA_GREENS &lt;dbl+lbl&gt;, PARTYFAV_AUSTRALIA_LABOUR &lt;dbl+lbl&gt;, … Each row is an individual response. To the individual is attached country, and answers to a number of multiple choice questions. Notice that there is also a weight column. Intructions from the source specify that answers must be weighted when used to compute the sum or mean response. There is more nuanced, task-specific data transformation needed for different plots and tasks, which we introduce later. A general guideline for the data transformation codes later is that, one can use the mutate and as_factor function to create discrete versions of columns convenient for plotting. In particular, as_factor allows one to utilize the special &lt;dbl+lbl&gt; format of columns and allow graphs to output interpretable labels. "],["missing-values.html", "Chapter 4 Missing values", " Chapter 4 Missing values We select 14 survey questions. Each question is a multiple choice question with choices: I don’t know or refuse to answer. We identify these choices as missing data and plot and analyze the missing data pattern. Now we plot missing data. From the missing value pattern plot, we see that the data is quite complete, with complete data being by far the most common pattern, and the survey question with largest missing rate has only about 10% answers missing. There is no significant pattern on correlations between features (survey questions) with missing answers. Looking at percentage of rows missing, we find that more abstract questions related to COVID tend to have more missing answers. For example, covid_countryfaith, which means whether the respondent thinks the country has more or less religious faith after the COVID outbreak, has more missing answers than most. Questions like economic situation (econ_sit) and how COVID affects family bond (covid_family), which are less abstract, have fewer missing answers. This pattern is reasonable. Plotting from a subsample of data causes variations, but this pattern has been consistent. "],["results.html", "Chapter 5 Results", " Chapter 5 Results We first analyze data on an individual basis, differently from the nation-wide approach of the original study. People who are more affected by the COVID-19 pandemic tend to have more unfavorable views of China. The rate of people’s most negative views of China was highest in the group most affected by the pandemic, while the rate of people’s most positive views of China was highest in the group not affected by the pandemic. Also, as shown by the dividing line between the blue and green areas, the ratio of unfavorable views to favorable views increases with the impact of the pandemic. Therefore, the COVID-19 pandemic may increase people’s dislike of China to some extent. To further illustrate the relationship between the COVID-19 and people’s opinions on China. We will investigate more immediate results, that is, people’s opinions on how well China has handled the coronavirus pandemic. The correlations here are much more apparent, as shown in the stepped pattern of this mosaic plot. Moreover, in the previous graph, the majority of each group expresses negative views toward China. However, in the current graph, the majority of people who say China has done a very good job dealing with the coronavirus outbreak think of China positively. This significant difference reveals that people’s evaluations of China’s response to COVID-19 can greatly affect people’s opinion on China. Moreover, the results of people’s opinions on China and China’s response to Covid-19 are very consistent. People who think China has handled the coronavirus outbreak poorly have more negative evaluations on China and vice versa. Covid-19 will affect other aspects, such as the economy, and indirectly affect people’s evaluation of China. People who are in different economic situations may have different opinions on China. Also, people who are in bad economic situations are more likely to be influenced by the pandemic and hence have a bad attitude toward China. We will then analyze how opinions on China were affected by the economic situation and covid effect on life respectively and interactively. All the three subgraphs are consistent with what we intuitively expected. People affected most by the covid are more likely to have unfavorable opinions on China; People in bad economic situations are more likely to have unfavorable opinions on China; People in bad economic situations are more likely to be affected by the covid. Then we consider all these three variables in an integrated graph. From the graph, the percentage of very unfavorable opinions are extremely high in the “very bad” economic situation category for all four “affected by covid” groups. This indicates that people in bad condition are much more likely to have highly unfavorable opinions on China no matter how the covid changed their life. Also, for people in good economic situations but greatly affected by the Covid-19, they also tend to hate China. The results of opinions for all four “affected by covid” groups are very similar except for people who are both in very good economic situations and not affected by the covid, which is the first column in the “not at all” group. People in this group have significantly better views of China. This is consistent with our conjecture that the Covid-19 may account for the highly increase of negative opinions on China. Next, we study whether the factors studied above apply across countries. That is, for factors significant on an individual-level, we ask whether these factors can indicate a country’s overall opinion towards China. We find that it is not always true. Bars in figure XX and XX indicate countries, ranked by percentage of respondents with unfavorable opinions towards China (very unfavorable plus somewhat unfavorable). They are colored by percentages of respondents corresponding to the labelled group. These by-country graphs show interesting differences from by-individual mosaic plots. Figure XX shows that the correlation between economic situation and opinion towards China does not apply across country. This figure shows no clear pattern, meaning that economics situation does not indicate whether the country is more unfavorable towards China. On the other hand, the mosaic plot (Figure XX) shows that an individual is more likely to be unfavorable towards China if he/she thinks the economic situation is bad. Therefore, economic situation is one such factor that is significant for individuals but not for countries. On the other side, perception on China’s handling of Covid applies not only on the individual level but also across countries. In figure XX, the bottom countries, i.e. those less unfavorable towards China, tend to have fewer percentages thinking that China handled Covid very or somewhat badly. This factor has also been shown to be very significant on the individual level (figure XX). Before, we analyzed correlations, and find idea bout how China handled Covid to be most significant. However, we do not know if this idea led to unfavorable opinions, or vice versa. To get a better idea, we study whether idea about China’s handling Covid is related a drop in public opinions (increase in unfavorabe percentage) from 2019 to 2020. Figure XX is a similar barchart, but countries are now ranked by drop in opinion towards China. We see correlation also bewteen this factor and drop in opinion. Therefore, it is likely that opinion on how China handled Covid is one of the causes of unfavorable opinion towards China today. That said, these two factors can also be interlinked. We do not know whether unfavorable opinion towards China inherent in 2019 also caused negative perceptions of the way China handled Covid. Last, we focus our analysis on people in the U.S. ‘econ_ties_china’ shows people’s opinions on economic ties between the U.S. and China. The larger the number is, the worse economic ties are. ‘china_tough’ shows people’s opinions on economic and trade policy toward China. 1 represents no tougher economic relationship, while 2 represents a tougher economic relationship. ‘china_us_enemy’ represents the relationship between China and the U.S. 1 represents a partner, 2 represents a competitor, and 3 represents an enemy. From the first alluvial graph, data in the lower half part of each column are very likely to stay on the lower part, indicating that people who have negative feelings toward China will always give bad evaluations on China in any aspect. Also, the last two columns are much more consistent. As we expected, people who regard China as an enemy are very likely to have unfavorable opinions on China. The larger the ‘china_covid_blame’ is, the more China should be blamed for its initial handling of the coronavirus outbreak. The larger the ‘china_covid_response’ is, the more China should be responsible for the outbreak of the coronavirus regardless of relations between the U.S. and China. The second alluvial graph is much tidier than the first one, indicating that people have more complicated opinions on politics than those on a sudden event. Also, the first two columns are consistent with each other since they are similar questions except that the latter included political concerns. Surprisingly, in the U.S., there is still a big difference between opinions on China’s response to the Covid-19 and opinions on China. "],["interactive-component.html", "Chapter 6 Interactive component", " Chapter 6 Interactive component The map provides a holistic view of percent of unfavorable opinion towards China across many countries. Viewing the opinions change on the move shows that 2020 features a particularly large increase. This further suggests the impact of Covid on global opinion towards China. For some reason, iframe cannot output the map, a problem we haven’t yet solved. To view the map, one can open and view the .html file itself, which should give correct outputs. "],["conclusion.html", "Chapter 7 Conclusion", " Chapter 7 Conclusion We have shown factors connected to negative opinions towards China, and analyzed them on both individual and national scales. The results suggest that both covid and socio-economic factors have an effect on the increasing negative impact on China. However, it is suggested that covid itself further pushed opinions to the negative side, and certain covid-related factors are significant on both individual and national scales. One limitation is that most plots give correlational information, and to address that we tried to inject more causal information through different dimensions of analysis. One example is analyzing not just current atittudes, but also attitudes across time along with other variables, such as one variable that is significant across all experiments: opinion on how China handled covid. Even so, the limitation remains and we should be encouraged to think beyond what the data represents. There could always be an omitted variable bias, that is, something latent that leads to both negative thinking about the way China handled covid and opinion towards China in general. A future direction is thinking about what could these latent variables be. Possible candidates include the perception of democracy and the culture of media, which could lead to criticism against both China’s stoic covid policies and China itself. Note: Grading is based both on your graphs and verbal explanations. Follow all best practices as discussed in class, including choosing appropriate parameters for all graphs. Do not expect the assignment questions to spell out precisely how the graphs should be drawn. Sometimes guidance will be provided, but the absense of guidance does not mean that all choices are ok. IMPORTANT: THIS TEMPLATE DOES NOT INCLUDE THE SAMPLE GRAPHS THAT APPEAR IN THE .HTML VERSION OF THE ASSIGNMENT SO BE SURE TO VIEW THAT FILE AS WELL. 7.0.1 1. mycars missing patterns Create a missing values plot for the mycars dataset created below (slightly different from the one in the lecture slides). Your plot should be in the style of extracat::visna() (no longer available on CRAN) using ggplot2 to create the main plot and two side plots and patchwork to put them together. It should show accurately: missing patterns, counts for missing by column and missing by pattern, and make it clear which row respresents complete cases. Bars in the side plots should be sorted and correspond to the rows and columns of the main plot. An example is provided though the aesthetics of your plot do not have to conform precisely to the example. Some code is provided to get you started with finding missing patterns. (Keep in mind that in the next question you will be turning this code into a function so to save yourself time later on write as generically as possible.) library(tidyverse) library(patchwork) # Add NAs to mtcars dataset set.seed(5702) mycars &lt;- mtcars mycars[1:25, &quot;gear&quot;] &lt;- NA mycars[10:20, 3:5] &lt;- NA for (i in 1:10) mycars[sample(32,1), sample(11,1)] &lt;- NA Hints: You can use this code to find and count the missing patterns: missing_patterns &lt;- data.frame(is.na(mycars)) %&gt;% group_by_all() %&gt;% count(name = &quot;count&quot;, sort = TRUE) %&gt;% ungroup() tidypatterns &lt;- missing_patterns[,1:11] %&gt;% rownames_to_column(&quot;id&quot;) %&gt;% gather(key, value, -id) complete_bool = rowSums(missing_patterns[,1:11]) == 0 complete_row = which(complete_bool) tidypatterns &lt;- tidypatterns %&gt;% mutate( ToHighlight = ifelse(id %in% complete_row, &quot;TRUE&quot;, &quot;FALSE&quot; ) ) tidypatterns &lt;- tidypatterns %&gt;% mutate( color = as.factor(as.integer(!value)+as.integer(as.logical(ToHighlight))) ) missing_patterns2&lt;-missing_patterns[1:11] missing_patterns2 &lt;- missing_patterns2 %&gt;% mutate( ToHighlight = ifelse(rowSums(.)==0, &quot;TRUE&quot;, &quot;FALSE&quot; ) ) missing_patterns[&#39;ToHighlight&#39;] = missing_patterns2[&#39;ToHighlight&#39;] p1&lt;-tidypatterns %&gt;% mutate(key = fct_reorder(key,-value,.fun=&#39;sum&#39;)) %&gt;% ggplot(aes(x = key,y = fct_rev(id), fill = color))+ geom_tile(color = &quot;white&quot;) + scale_fill_manual(values = c(&#39;0&#39;=&quot;purple&quot;,&#39;1&#39;=&quot;light grey&quot;,&#39;2&#39;=&quot;dark grey&quot;))+ #scale_alpha_manual(values = c(alpha(&#39;grey&#39;,0.1),alpha(&#39;purple&#39;,0.1)))+ xlab(&#39;variable&#39;)+ ylab(&#39;missing pattern&#39;)+ guides(fill=FALSE, color=FALSE)+ theme_bw()+ annotate(&quot;text&quot;,x =ncol(missing_patterns)/2 ,y = nrow(missing_patterns)-complete_row+1,label = &quot;complete cases&quot;) a = levels(fct_reorder(tidypatterns$key,-tidypatterns$value,.fun=&#39;sum&#39;)) b = colSums(is.na(mycars)) reorder_idx &lt;- match(a,names(b)) value = b[reorder_idx] key = names(value) df &lt;- data.frame(key,value) rownames(df) &lt;- 1:nrow(df) p2&lt;-ggplot(df,aes(x = reorder(key,-value),y = value)) + geom_col(fill = &quot;lightblue&quot;)+ ylab(&#39;num rows \\n missing:&#39;)+ labs(x = &quot;&quot;)+ ggtitle(&#39;Missing value patterns&#39;)+ theme_bw() p3&lt;-ggplot(missing_patterns,aes(x = nrow(missing_patterns):1,y = count,fill = ToHighlight)) + geom_col()+ scale_x_continuous(breaks = 1:nrow(missing_patterns), labels = nrow(missing_patterns):1)+ scale_fill_manual(values = c(&#39;FALSE&#39;=&quot;lightblue&quot;,&#39;TRUE&#39;=&quot;blue&quot;))+ ylab(&#39;row count&#39;)+ coord_flip()+ theme_bw()+ theme(axis.title.y=element_blank())+ guides(fill=FALSE, color=FALSE) layout &lt;- &quot; BBBBBB# BBBBBB# AAAAAAC AAAAAAC AAAAAAC AAAAAAC AAAAAAC &quot; p1 + p2 + p3 + plot_layout(design = layout) To highlight the complete cases row you need a different fill scale than the one used to show missing vs. non-missing in the main plot (purple and grey in the example). This is a little tricky since you’re only allowed one fill scale in ggplot2. You can either use alpha to control the highlight with scale_alpha_manual(values = ...) or use the ggnewscale package which provides for multiple fill scales in the same graph. 7.0.2 2. Missing value plot function Create a function for creating missing plots based on your code from question 1. It should provide an option to show either missing counts or missing percent. The percent option for mycars is shown below. You either put the function code in a separate .R file or include it in the .Rmd file. source(&quot;plot_missing.R&quot;) plot_missing(mycars, percent = TRUE) Show the output for both options (counts / percent) for the economics dataset in the ggplot2 package. (This is a test to see if your function works if there are no missing values.) data = economics source(&quot;plot_missing.R&quot;) plot_missing(data,percent=FALSE) source(&quot;plot_missing.R&quot;) plot_missing(data,percent=TRUE) Show the output for both options (counts / percent) for the HollywoodMovies2011 dataset in the Lock5withR package. You can shorten the column names so they don’t overlap in the plot. library(Lock5withR) data = HollywoodMovies2011 ori_name = colnames(data) new_name = abbreviate(ori_name,minlength = 4) colnames(data) = new_name source(&quot;plot_missing.R&quot;) plot_missing(data, percent = FALSE) source(&quot;plot_missing.R&quot;) plot_missing(data, percent = TRUE) 7.0.3 3. Setup your GitHub final project repo Set up your final project repository following the EDAVproject template. You can either choose one team member’s GitHub account, or create an organization to house the final project. Be sure to follow all of the steps in the README so your bookdown book renders with your information, not the placeholders in the template. Edit the link below to point to your rendered book: https://github.com/zhang-liyi/global-opinion Make sure that all team members have write access to the repository and have practiced making contributions. Edit the link below to point to your contributors page, showing that all team members have made contributions to the repo (Note that we do not have the ability to see who has write access, only who has contributed): https://github.com/zhang-liyi/global-opinion/graphs/contributors Discuss a plan for dividing up the work for the final project and briefly summarize what each person will do. The project has two team members: Xingyu Wei and Liyi Zhang. We will each study sub-problems that are relevant to demonstrating factors that affect global opinion. In this process, we will each do a portion of coding and written analysis specific to the sub-problems that we are each studying. So far, more specficially, Xingyu wrote the code for missing data, and Liyi gathered and cleaned the dataset and setup the GitHub. 7.0.4 4. Missing values chapter Write a first draft of the missing values chapter of your final project. You do not have to include all of the data you use in the final project. Choose one file and analyze it using techniques discussed in class for missing values. Include a plot using your function from Q2 as well as verbal interpretation of the plot. Edit this link to point to your chapter: https://zhang-liyi.github.io/global-opinion/missing-values.html "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
